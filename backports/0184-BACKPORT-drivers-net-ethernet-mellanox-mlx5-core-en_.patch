From: Jianbo Liu <jianbol@mellanox.com>
Subject: [PATCH] BACKPORT: drivers/net/ethernet/mellanox/mlx5/core/en_rep.h

Change-Id: Iae03bfb1b1747ce502bde474d5afe120250ca0a3
---
 .../net/ethernet/mellanox/mlx5/core/en_rep.h  | 27 ++++++++++++++++++-
 1 file changed, 26 insertions(+), 1 deletion(-)

--- a/drivers/net/ethernet/mellanox/mlx5/core/en_rep.h
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_rep.h
@@ -242,7 +242,29 @@ static inline bool mlx5e_eswitch_rep(str
 	       mlx5e_eswitch_uplink_rep(netdev);
 }
 
+#ifdef HAVE_DEVLINK_PORT_ATTRS_PCI_PF_SET
 struct devlink_port *mlx5e_rep_get_devlink_port(struct net_device *dev);
+#else
+static inline struct devlink_port *mlx5e_rep_get_devlink_port(struct net_device *dev)
+{
+	return NULL;
+}
+#endif
+
+#ifndef HAVE_DEVLINK_PORT_ATTRS_PCI_PF_SET
+int mlx5e_rep_get_phys_port_name(struct net_device *dev,
+				 char *buf, size_t len);
+#endif
+
+#if defined(HAVE_NDO_GET_PORT_PARENT_ID) || defined(HAVE_SWITCHDEV_OPS) || defined(HAVE_SWITCHDEV_H_COMPAT)
+#ifdef HAVE_DEVLINK_PORT_ATTRS_PCI_PF_SET
+void
+#else
+int
+#endif
+mlx5e_rep_get_port_parent_id(struct net_device *dev,
+			     struct netdev_phys_item_id *ppid);
+#endif
 
 #else /* CONFIG_MLX5_ESWITCH */
 static inline bool mlx5e_is_uplink_rep(struct mlx5e_priv *priv) { return false; }
@@ -258,7 +280,10 @@ static inline void mlx5e_rep_register_vp
 static inline void mlx5e_rep_unregister_vport_reps(struct mlx5_core_dev *mdev) {}
 static inline struct devlink_port *mlx5e_rep_get_devlink_port(struct net_device *dev)
 { return NULL; }
-
+#ifndef HAVE_DEVLINK_PORT_ATTRS_PCI_PF_SET
+static inline int mlx5e_rep_get_phys_port_name(struct net_device *dev,
+					       char *buf, size_t len) { return 0; }
+#endif
 #endif
 
 static inline bool mlx5e_is_vport_rep(struct mlx5e_priv *priv)
